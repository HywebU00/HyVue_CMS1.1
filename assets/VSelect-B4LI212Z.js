import{V as ve,c as Ae}from"./VTextField-BKJRgd7E.js";import{g as se,p as Q,y as $,b as A,F as G,m as L,I as De,s as K,E as pe,v as W,k as M,aD as Re,H as be,x as ue,aq as Be,J as ke,a7 as Se,ad as Fe,C as Pe,D as _e,z as Ee,a as T,q as ne,j as Oe,n as Le,ah as Me,B as he,al as He,am as re,au as ze,aw as ge,ax as ye,ag as qe,aE as Ke,az as Ne,d as Ue}from"./index-BOjY_KPS.js";import{d as $e}from"./VSelectionControl-wnR3rcCX.js";import{f as je}from"./forwardRefs-C-GTDzx5.js";import{u as We,m as Je,V as Xe,b as Ve,c as Ye}from"./VList-Dh9LkOoo.js";import{u as ce,m as Te,k as Ge,l as Qe,w as Ze,V as we,j as et}from"./VImg-XZ1UB8fh.js";import{a as tt,V as lt}from"./VMenu-CyrPUP_2.js";import{u as Ie}from"./group-CvAcnQgB.js";import{g as nt}from"./VOverlay-DLcElQW3.js";import{V as at}from"./VDivider-v9f7M09q.js";import{V as ot}from"./VCheckboxBtn-3uJmDlp1.js";import{f as ut}from"./VCard-BcsARfKX.js";import{a as rt}from"./VChip-C2Am8Tyi.js";const it=Q({renderless:Boolean,...Te()},"VVirtualScrollItem"),st=se()({name:"VVirtualScrollItem",inheritAttrs:!1,props:it(),emits:{"update:height":t=>!0},setup(t,d){let{attrs:l,emit:c,slots:o}=d;const{resizeRef:f,contentRect:v}=Ie(void 0,"border");$(()=>{var a;return(a=v.value)==null?void 0:a.height},a=>{a!=null&&c("update:height",a)}),ce(()=>{var a,s;return t.renderless?A(G,null,[(a=o.default)==null?void 0:a.call(o,{itemRef:f})]):A("div",L({ref:f,class:["v-virtual-scroll__item",t.class],style:t.style},l),[(s=o.default)==null?void 0:s.call(o)])})}}),ct=-1,dt=1,ie=100,ft=Q({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function mt(t,d){const l=De(),c=K(0);pe(()=>{c.value=parseFloat(t.itemHeight||0)});const o=K(0),f=K(Math.ceil((parseInt(t.height)||l.height.value)/(c.value||16))||1),v=K(0),a=K(0),s=W(),k=W();let i=0;const{resizeRef:H,contentRect:D}=Ie();pe(()=>{H.value=s.value});const S=M(()=>{var e;return s.value===document.documentElement?l.height.value:((e=D.value)==null?void 0:e.height)||parseInt(t.height)||0}),B=M(()=>!!(s.value&&k.value&&S.value&&c.value));let p=Array.from({length:d.value.length}),g=Array.from({length:d.value.length});const P=K(0);let w=-1;function z(e){return p[e]||c.value}const q=Re(()=>{const e=performance.now();g[0]=0;const n=d.value.length;for(let r=1;r<=n-1;r++)g[r]=(g[r-1]||0)+z(r-1);P.value=Math.max(P.value,performance.now()-e)},P),y=$(B,e=>{e&&(y(),i=k.value.offsetTop,q.immediate(),O(),~w&&ke(()=>{Se&&window.requestAnimationFrame(()=>{le(w),w=-1})}))});be(()=>{q.clear()});function Z(e,n){const r=p[e],h=c.value;c.value=h?Math.min(c.value,n):n,(r!==n||h!==c.value)&&(p[e]=n,q())}function _(e){e=ue(e,0,d.value.length-1);const n=Math.floor(e),r=e%1,h=n+1,I=g[n]||0,u=g[h]||I;return I+(u-I)*r}function E(e){return vt(g,e)}let j=0,N=0,J=0;$(S,(e,n)=>{n&&(O(),e<n&&requestAnimationFrame(()=>{N=0,O()}))});let X=-1;function ee(){if(!s.value||!k.value)return;const e=s.value.scrollTop,n=performance.now();n-J>500?(N=Math.sign(e-j),i=k.value.offsetTop):N=e-j,j=e,J=n,window.clearTimeout(X),X=window.setTimeout(U,500),O()}function U(){!s.value||!k.value||(N=0,J=0,window.clearTimeout(X),O())}let te=-1;function O(){cancelAnimationFrame(te),te=requestAnimationFrame(ae)}function ae(){if(!s.value||!S.value||!c.value)return;const e=j-i,n=Math.sign(N),r=Math.max(0,e-ie),h=ue(E(r),0,d.value.length),I=e+S.value+ie,u=ue(E(I)+1,h+1,d.value.length);if((n!==ct||h<o.value)&&(n!==dt||u>f.value)){const x=_(o.value)-_(h),C=_(u)-_(f.value);Math.max(x,C)>ie?(o.value=h,f.value=u):(h<=0&&(o.value=h),u>=d.value.length&&(f.value=u))}v.value=_(o.value),a.value=_(d.value.length)-_(f.value)}function le(e){const n=_(e);!s.value||e&&!n?w=e:s.value.scrollTop=n}const oe=M(()=>d.value.slice(o.value,f.value).map((e,n)=>{const r=n+o.value;return{raw:e,index:r,key:Be(e,t.itemKey,r)}}));return $(d,()=>{p=Array.from({length:d.value.length}),g=Array.from({length:d.value.length}),q.immediate(),O()},{deep:1}),{calculateVisibleItems:O,containerRef:s,markerRef:k,computedItems:oe,paddingTop:v,paddingBottom:a,scrollToIndex:le,handleScroll:ee,handleScrollend:U,handleItemResize:Z}}function vt(t,d){let l=t.length-1,c=0,o=0,f=null,v=-1;if(t[l]<d)return l;for(;c<=l;)if(o=c+l>>1,f=t[o],f>d)l=o-1;else if(f<d)v=o,c=o+1;else return f===d?o:c;return v}const pt=Q({items:{type:Array,default:()=>[]},renderless:Boolean,...ft(),...Te(),...Qe()},"VVirtualScroll"),ht=se()({name:"VVirtualScroll",props:pt(),setup(t,d){let{slots:l}=d;const c=Fe("VVirtualScroll"),{dimensionStyles:o}=Ge(t),{calculateVisibleItems:f,containerRef:v,markerRef:a,handleScroll:s,handleScrollend:k,handleItemResize:i,scrollToIndex:H,paddingTop:D,paddingBottom:S,computedItems:B}=mt(t,Pe(()=>t.items));return _e(()=>t.renderless,()=>{function p(){var w,z;const P=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[P]("scroll",s,{passive:!0}),document[P]("scrollend",k)):((w=v.value)==null||w[P]("scroll",s,{passive:!0}),(z=v.value)==null||z[P]("scrollend",k))}Ee(()=>{v.value=nt(c.vnode.el,!0),p(!0)}),be(p)}),ce(()=>{const p=B.value.map(g=>T(st,{key:g.key,renderless:t.renderless,"onUpdate:height":P=>i(g.index,P)},{default:P=>{var w;return(w=l.default)==null?void 0:w.call(l,{item:g.raw,index:g.index,...P})}}));return t.renderless?A(G,null,[A("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:ne(D.value)}},null),p,A("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ne(S.value)}},null)]):A("div",{ref:v,class:Le(["v-virtual-scroll",t.class]),onScrollPassive:s,onScrollend:k,style:Oe([o.value,t.style])},[A("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:ne(D.value),paddingBottom:ne(S.value)}},[p])])}),{calculateVisibleItems:f,scrollToIndex:H}}});function gt(t,d){const l=K(!1);let c;function o(a){cancelAnimationFrame(c),l.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{l.value=!1})})}async function f(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(l.value){const s=$(l,()=>{s(),a()})}else a()})}async function v(a){var i,H;if(a.key==="Tab"&&((i=d.value)==null||i.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const s=(H=t.value)==null?void 0:H.$el;if(!s)return;(a.key==="Home"||a.key==="End")&&s.scrollTo({top:a.key==="Home"?0:s.scrollHeight,behavior:"smooth"}),await f();const k=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const D=s.getBoundingClientRect().top;for(const S of k)if(S.getBoundingClientRect().top>=D){S.focus();break}}else{const D=s.getBoundingClientRect().bottom;for(const S of[...k].reverse())if(S.getBoundingClientRect().bottom<=D){S.focus();break}}}return{onScrollPassive:o,onKeydown:v}}const yt=Q({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:qe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...Je({itemChildren:!1})},"Select"),Vt=Q({...yt(),...ze(Ae({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ze({transition:{component:tt}})},"VSelect"),Ft=se()({name:"VSelect",props:Vt(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,d){let{slots:l}=d;const{t:c}=Me(),o=W(),f=W(),v=W(),{items:a,transformIn:s,transformOut:k}=We(t),i=he(t,"modelValue",[],e=>s(e===null?[null]:He(e)),e=>{const n=k(e);return t.multiple?n:n[0]??null}),H=M(()=>typeof t.counterValue=="function"?t.counterValue(i.value):typeof t.counterValue=="number"?t.counterValue:i.value.length),D=$e(t),S=M(()=>i.value.map(e=>e.value)),B=K(!1);let p="",g=-1,P;const w=M(()=>t.hideSelected?a.value.filter(e=>!i.value.some(n=>(t.valueComparator||re)(n,e))):a.value),z=M(()=>t.hideNoData&&!w.value.length||D.isReadonly.value||D.isDisabled.value),q=he(t,"menu"),y=M({get:()=>q.value,set:e=>{var n;q.value&&!e&&((n=f.value)!=null&&n.Î¨openChildren.size)||e&&z.value||(q.value=e)}}),Z=Pe(()=>y.value?t.closeText:t.openText),_=M(()=>{var e;return{...t.menuProps,activatorProps:{...((e=t.menuProps)==null?void 0:e.activatorProps)||{},"aria-haspopup":"listbox"}}}),E=W(),j=gt(E,o);function N(e){t.openOnClear&&(y.value=!0)}function J(){z.value||(y.value=!y.value)}function X(e){ge(e)&&ee(e)}function ee(e){var m,R,b;if(!e.key||D.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(e.key)&&e.preventDefault(),["Enter","ArrowDown"," "].includes(e.key)&&(y.value=!0),["Escape","Tab"].includes(e.key)&&(y.value=!1),e.key==="Home"?(m=E.value)==null||m.focus("first"):e.key==="End"&&((R=E.value)==null||R.focus("last"));const n=1e3;if(!ge(e))return;const r=performance.now();r-P>n&&(p="",g=-1),p+=e.key.toLowerCase(),P=r;const h=w.value;function I(){let V=u();return V||p.at(-1)===p.at(-2)&&(p=p.slice(0,-1),V=u(),V)||(g=-1,V=u(),V)?V:(p=e.key.toLowerCase(),u())}function u(){for(let V=g+1;V<h.length;V++){const Y=h[V];if(Y.title.toLowerCase().startsWith(p))return[Y,V]}}const x=I();if(!x)return;const[C,F]=x;g=F,(b=E.value)==null||b.focus(F),t.multiple||(i.value=[C])}function U(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e.props.disabled)if(t.multiple){const r=i.value.findIndex(I=>(t.valueComparator||re)(I.value,e.value)),h=n??!~r;if(~r){const I=h?[...i.value,e]:[...i.value];I.splice(r,1),i.value=I}else h&&(i.value=[...i.value,e])}else{const r=n!==!1;i.value=r?[e]:[],ke(()=>{y.value=!1})}}function te(e){var n;(n=E.value)!=null&&n.$el.contains(e.relatedTarget)||(y.value=!1)}function O(){var e;t.eager&&((e=v.value)==null||e.calculateVisibleItems())}function ae(){var e;B.value&&((e=o.value)==null||e.focus())}function le(e){B.value=!0}function oe(e){if(e==null)i.value=[];else if(ye(o.value,":autofill")||ye(o.value,":-webkit-autofill")){const n=a.value.find(r=>r.title===e);n&&U(n)}else o.value&&(o.value.value="")}return $(y,()=>{if(!t.hideSelected&&y.value&&i.value.length){const e=w.value.findIndex(n=>i.value.some(r=>(t.valueComparator||re)(r.value,n.value)));Se&&!t.noAutoScroll&&window.requestAnimationFrame(()=>{var n;e>=0&&((n=v.value)==null||n.scrollToIndex(e))})}}),$(()=>t.items,(e,n)=>{y.value||B.value&&!n.length&&e.length&&(y.value=!0)}),ce(()=>{const e=!!(t.chips||l.chip),n=!!(!t.hideNoData||w.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),r=i.value.length>0,h=ve.filterProps(t),I=r||!B.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return T(ve,L({ref:o},h,{modelValue:i.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":oe,focused:B.value,"onUpdate:focused":u=>B.value=u,validationValue:i.externalValue,counterValue:H.value,dirty:r,class:["v-select",{"v-select--active-menu":y.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!l.selection},t.class],style:t.style,inputmode:"none",placeholder:I,"onClick:clear":N,"onMousedown:control":J,onBlur:te,onKeydown:ee,"aria-label":c(Z.value),title:c(Z.value)}),{...l,default:()=>A(G,null,[T(lt,L({ref:f,modelValue:y.value,"onUpdate:modelValue":u=>y.value=u,activator:"parent",contentClass:"v-select__content",disabled:z.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:O,onAfterLeave:ae},_.value),{default:()=>[n&&T(Xe,L({ref:E,selected:S.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:X,onFocusin:le,tabindex:"-1","aria-live":"polite","aria-label":`${t.label}-list`,color:t.itemColor??t.color},j,t.listProps),{default:()=>{var u,x,C;return[(u=l["prepend-item"])==null?void 0:u.call(l),!w.value.length&&!t.hideNoData&&(((x=l["no-data"])==null?void 0:x.call(l))??T(Ve,{key:"no-data",title:c(t.noDataText)},null)),T(ht,{ref:v,renderless:!0,items:w.value,itemKey:"value"},{default:F=>{var de,fe,me;let{item:m,index:R,itemRef:b}=F;const V=Ke(m.props),Y=L(m.props,{ref:b,key:m.value,onClick:()=>U(m,null)});return m.type==="divider"?((de=l.divider)==null?void 0:de.call(l,{props:m.raw,index:R}))??T(at,L(m.props,{key:`divider-${R}`}),null):m.type==="subheader"?((fe=l.subheader)==null?void 0:fe.call(l,{props:m.raw,index:R}))??T(Ye,L(m.props,{key:`subheader-${R}`}),null):((me=l.item)==null?void 0:me.call(l,{item:m,index:R,props:Y}))??T(Ve,L(Y,{role:"option"}),{prepend:xe=>{let{isSelected:Ce}=xe;return A(G,null,[t.multiple&&!t.hideSelected?T(ot,{key:m.value,modelValue:Ce,ripple:!1,tabindex:"-1"},null):void 0,V.prependAvatar&&T(ut,{image:V.prependAvatar},null),V.prependIcon&&T(we,{icon:V.prependIcon},null)])}})}}),(C=l["append-item"])==null?void 0:C.call(l)]}})]}),i.value.map((u,x)=>{function C(b){b.stopPropagation(),b.preventDefault(),U(u,!1)}const F={"onClick:close":C,onKeydown(b){b.key!=="Enter"&&b.key!==" "||(b.preventDefault(),b.stopPropagation(),C(b))},onMousedown(b){b.preventDefault(),b.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},m=e?!!l.chip:!!l.selection,R=m?Ne(e?l.chip({item:u,index:x,props:F}):l.selection({item:u,index:x})):void 0;if(!(m&&!R))return A("div",{key:u.value,class:"v-select__selection"},[e?l.chip?T(et,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:u.title}}},{default:()=>[R]}):T(rt,L({key:"chip",closable:t.closableChips,size:"small",text:u.title,disabled:u.props.disabled},F),null):R??A("span",{class:"v-select__selection-text"},[u.title,t.multiple&&x<i.value.length-1&&A("span",{class:"v-select__selection-comma"},[Ue(",")])])])})]),"append-inner":function(){var F,m;for(var u=arguments.length,x=new Array(u),C=0;C<u;C++)x[C]=arguments[C];return A(G,null,[(F=l["append-inner"])==null?void 0:F.call(l,...x),t.menuIcon?T(we,{class:"v-select__menu-icon",color:(m=o.value)==null?void 0:m.fieldIconColor,icon:t.menuIcon},null):void 0])}})}),je({isFocused:B,menu:y,select:U},o)}});export{Ft as V,ht as a,yt as m,gt as u};
