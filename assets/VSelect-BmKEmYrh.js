import{V as ve,c as Ae}from"./VTextField-Cigdp06n.js";import{g as se,p as Q,y as $,b as A,F as Y,m as E,I as Re,s as N,E as pe,v as W,k as M,aJ as De,H as Se,x as ue,a4 as Be,J as be,S as ke,a8 as Fe,C as Pe,D as _e,z as Le,a as T,q as ne,j as Oe,n as Ee,a2 as Me,B as he,az as He,aG as re,R as ze,aK as ge,aL as ye,W as Ke,aM as Ne,aN as qe,d as Ue}from"./index-cttzLRk6.js";import{g as $e}from"./VInput-CJY4y2ed.js";import{f as je}from"./forwardRefs-C-GTDzx5.js";import{u as We,m as Je,V as Ge,b as Ve,c as Xe}from"./VList-xxwYcM7p.js";import{u as ce,m as Te,k as Ye,l as Qe,D as Ze,V as we,j as et}from"./VImg-KtN8R8Jb.js";import{V as tt}from"./dialog-transition-ANHp87yw.js";import{V as lt}from"./VMenu-B-3SZl6W.js";import{c as Ie}from"./group-CZEoCJTB.js";import{g as nt}from"./VOverlay-Cn-FeAsu.js";import{V as at}from"./VDivider-BUThPAeY.js";import{V as ot}from"./VCheckboxBtn-K1TksaNF.js";import{d as ut}from"./VCard-BEtpMMIm.js";import{a as rt}from"./VChip-CrH4EygI.js";const it=Q({renderless:Boolean,...Te()},"VVirtualScrollItem"),st=se()({name:"VVirtualScrollItem",inheritAttrs:!1,props:it(),emits:{"update:height":t=>!0},setup(t,d){let{attrs:l,emit:c,slots:o}=d;const{resizeRef:f,contentRect:v}=Ie(void 0,"border");$(()=>{var a;return(a=v.value)==null?void 0:a.height},a=>{a!=null&&c("update:height",a)}),ce(()=>{var a,s;return t.renderless?A(Y,null,[(a=o.default)==null?void 0:a.call(o,{itemRef:f})]):A("div",E({ref:f,class:["v-virtual-scroll__item",t.class],style:t.style},l),[(s=o.default)==null?void 0:s.call(o)])})}}),ct=-1,dt=1,ie=100,ft=Q({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function mt(t,d){const l=Re(),c=N(0);pe(()=>{c.value=parseFloat(t.itemHeight||0)});const o=N(0),f=N(Math.ceil((parseInt(t.height)||l.height.value)/(c.value||16))||1),v=N(0),a=N(0),s=W(),b=W();let i=0;const{resizeRef:H,contentRect:R}=Ie();pe(()=>{H.value=s.value});const k=M(()=>{var e;return s.value===document.documentElement?l.height.value:((e=R.value)==null?void 0:e.height)||parseInt(t.height)||0}),B=M(()=>!!(s.value&&b.value&&k.value&&c.value));let p=Array.from({length:d.value.length}),g=Array.from({length:d.value.length});const P=N(0);let w=-1;function z(e){return p[e]||c.value}const K=De(()=>{const e=performance.now();g[0]=0;const n=d.value.length;for(let r=1;r<=n-1;r++)g[r]=(g[r-1]||0)+z(r-1);P.value=Math.max(P.value,performance.now()-e)},P),y=$(B,e=>{e&&(y(),i=b.value.offsetTop,K.immediate(),O(),~w&&be(()=>{ke&&window.requestAnimationFrame(()=>{le(w),w=-1})}))});Se(()=>{K.clear()});function Z(e,n){const r=p[e],h=c.value;c.value=h?Math.min(c.value,n):n,(r!==n||h!==c.value)&&(p[e]=n,K())}function _(e){e=ue(e,0,d.value.length-1);const n=Math.floor(e),r=e%1,h=n+1,I=g[n]||0,u=g[h]||I;return I+(u-I)*r}function L(e){return vt(g,e)}let j=0,q=0,J=0;$(k,(e,n)=>{n&&(O(),e<n&&requestAnimationFrame(()=>{q=0,O()}))});let G=-1;function ee(){if(!s.value||!b.value)return;const e=s.value.scrollTop,n=performance.now();n-J>500?(q=Math.sign(e-j),i=b.value.offsetTop):q=e-j,j=e,J=n,window.clearTimeout(G),G=window.setTimeout(U,500),O()}function U(){!s.value||!b.value||(q=0,J=0,window.clearTimeout(G),O())}let te=-1;function O(){cancelAnimationFrame(te),te=requestAnimationFrame(ae)}function ae(){if(!s.value||!k.value||!c.value)return;const e=j-i,n=Math.sign(q),r=Math.max(0,e-ie),h=ue(L(r),0,d.value.length),I=e+k.value+ie,u=ue(L(I)+1,h+1,d.value.length);if((n!==ct||h<o.value)&&(n!==dt||u>f.value)){const x=_(o.value)-_(h),C=_(u)-_(f.value);Math.max(x,C)>ie?(o.value=h,f.value=u):(h<=0&&(o.value=h),u>=d.value.length&&(f.value=u))}v.value=_(o.value),a.value=_(d.value.length)-_(f.value)}function le(e){const n=_(e);!s.value||e&&!n?w=e:s.value.scrollTop=n}const oe=M(()=>d.value.slice(o.value,f.value).map((e,n)=>{const r=n+o.value;return{raw:e,index:r,key:Be(e,t.itemKey,r)}}));return $(d,()=>{p=Array.from({length:d.value.length}),g=Array.from({length:d.value.length}),K.immediate(),O()},{deep:1}),{calculateVisibleItems:O,containerRef:s,markerRef:b,computedItems:oe,paddingTop:v,paddingBottom:a,scrollToIndex:le,handleScroll:ee,handleScrollend:U,handleItemResize:Z}}function vt(t,d){let l=t.length-1,c=0,o=0,f=null,v=-1;if(t[l]<d)return l;for(;c<=l;)if(o=c+l>>1,f=t[o],f>d)l=o-1;else if(f<d)v=o,c=o+1;else return f===d?o:c;return v}const pt=Q({items:{type:Array,default:()=>[]},renderless:Boolean,...ft(),...Te(),...Qe()},"VVirtualScroll"),ht=se()({name:"VVirtualScroll",props:pt(),setup(t,d){let{slots:l}=d;const c=Fe("VVirtualScroll"),{dimensionStyles:o}=Ye(t),{calculateVisibleItems:f,containerRef:v,markerRef:a,handleScroll:s,handleScrollend:b,handleItemResize:i,scrollToIndex:H,paddingTop:R,paddingBottom:k,computedItems:B}=mt(t,Pe(()=>t.items));return _e(()=>t.renderless,()=>{function p(){var w,z;const P=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[P]("scroll",s,{passive:!0}),document[P]("scrollend",b)):((w=v.value)==null||w[P]("scroll",s,{passive:!0}),(z=v.value)==null||z[P]("scrollend",b))}Le(()=>{v.value=nt(c.vnode.el,!0),p(!0)}),Se(p)}),ce(()=>{const p=B.value.map(g=>T(st,{key:g.key,renderless:t.renderless,"onUpdate:height":P=>i(g.index,P)},{default:P=>{var w;return(w=l.default)==null?void 0:w.call(l,{item:g.raw,index:g.index,...P})}}));return t.renderless?A(Y,null,[A("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:ne(R.value)}},null),p,A("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ne(k.value)}},null)]):A("div",{ref:v,class:Ee(["v-virtual-scroll",t.class]),onScrollPassive:s,onScrollend:b,style:Oe([o.value,t.style])},[A("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:ne(R.value),paddingBottom:ne(k.value)}},[p])])}),{calculateVisibleItems:f,scrollToIndex:H}}});function gt(t,d){const l=N(!1);let c;function o(a){cancelAnimationFrame(c),l.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{l.value=!1})})}async function f(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(l.value){const s=$(l,()=>{s(),a()})}else a()})}async function v(a){var i,H;if(a.key==="Tab"&&((i=d.value)==null||i.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const s=(H=t.value)==null?void 0:H.$el;if(!s)return;(a.key==="Home"||a.key==="End")&&s.scrollTo({top:a.key==="Home"?0:s.scrollHeight,behavior:"smooth"}),await f();const b=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const R=s.getBoundingClientRect().top;for(const k of b)if(k.getBoundingClientRect().top>=R){k.focus();break}}else{const R=s.getBoundingClientRect().bottom;for(const k of[...b].reverse())if(k.getBoundingClientRect().bottom<=R){k.focus();break}}}return{onScrollPassive:o,onKeydown:v}}const yt=Q({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Ke,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...Je({itemChildren:!1})},"Select"),Vt=Q({...yt(),...ze(Ae({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ze({transition:{component:tt}})},"VSelect"),_t=se()({name:"VSelect",props:Vt(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,d){let{slots:l}=d;const{t:c}=Me(),o=W(),f=W(),v=W(),{items:a,transformIn:s,transformOut:b}=We(t),i=he(t,"modelValue",[],e=>s(e===null?[null]:He(e)),e=>{const n=b(e);return t.multiple?n:n[0]??null}),H=M(()=>typeof t.counterValue=="function"?t.counterValue(i.value):typeof t.counterValue=="number"?t.counterValue:i.value.length),R=$e(t),k=M(()=>i.value.map(e=>e.value)),B=N(!1);let p="",g=-1,P;const w=M(()=>t.hideSelected?a.value.filter(e=>!i.value.some(n=>(t.valueComparator||re)(n,e))):a.value),z=M(()=>t.hideNoData&&!w.value.length||R.isReadonly.value||R.isDisabled.value),K=he(t,"menu"),y=M({get:()=>K.value,set:e=>{var n;K.value&&!e&&((n=f.value)!=null&&n.Î¨openChildren.size)||e&&z.value||(K.value=e)}}),Z=Pe(()=>y.value?t.closeText:t.openText),_=M(()=>{var e;return{...t.menuProps,activatorProps:{...((e=t.menuProps)==null?void 0:e.activatorProps)||{},"aria-haspopup":"listbox"}}}),L=W(),j=gt(L,o);function q(e){t.openOnClear&&(y.value=!0)}function J(){z.value||(y.value=!y.value)}function G(e){ge(e)&&ee(e)}function ee(e){var m,D,S;if(!e.key||R.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(e.key)&&e.preventDefault(),["Enter","ArrowDown"," "].includes(e.key)&&(y.value=!0),["Escape","Tab"].includes(e.key)&&(y.value=!1),e.key==="Home"?(m=L.value)==null||m.focus("first"):e.key==="End"&&((D=L.value)==null||D.focus("last"));const n=1e3;if(!ge(e))return;const r=performance.now();r-P>n&&(p="",g=-1),p+=e.key.toLowerCase(),P=r;const h=w.value;function I(){let V=u();return V||p.at(-1)===p.at(-2)&&(p=p.slice(0,-1),V=u(),V)||(g=-1,V=u(),V)?V:(p=e.key.toLowerCase(),u())}function u(){for(let V=g+1;V<h.length;V++){const X=h[V];if(X.title.toLowerCase().startsWith(p))return[X,V]}}const x=I();if(!x)return;const[C,F]=x;g=F,(S=L.value)==null||S.focus(F),t.multiple||(i.value=[C])}function U(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e.props.disabled)if(t.multiple){const r=i.value.findIndex(I=>(t.valueComparator||re)(I.value,e.value)),h=n??!~r;if(~r){const I=h?[...i.value,e]:[...i.value];I.splice(r,1),i.value=I}else h&&(i.value=[...i.value,e])}else{const r=n!==!1;i.value=r?[e]:[],be(()=>{y.value=!1})}}function te(e){var n;(n=L.value)!=null&&n.$el.contains(e.relatedTarget)||(y.value=!1)}function O(){var e;t.eager&&((e=v.value)==null||e.calculateVisibleItems())}function ae(){var e;B.value&&((e=o.value)==null||e.focus())}function le(e){B.value=!0}function oe(e){if(e==null)i.value=[];else if(ye(o.value,":autofill")||ye(o.value,":-webkit-autofill")){const n=a.value.find(r=>r.title===e);n&&U(n)}else o.value&&(o.value.value="")}return $(y,()=>{if(!t.hideSelected&&y.value&&i.value.length){const e=w.value.findIndex(n=>i.value.some(r=>(t.valueComparator||re)(r.value,n.value)));ke&&!t.noAutoScroll&&window.requestAnimationFrame(()=>{var n;e>=0&&((n=v.value)==null||n.scrollToIndex(e))})}}),$(()=>t.items,(e,n)=>{y.value||B.value&&!n.length&&e.length&&(y.value=!0)}),ce(()=>{const e=!!(t.chips||l.chip),n=!!(!t.hideNoData||w.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),r=i.value.length>0,h=ve.filterProps(t),I=r||!B.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return T(ve,E({ref:o},h,{modelValue:i.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":oe,focused:B.value,"onUpdate:focused":u=>B.value=u,validationValue:i.externalValue,counterValue:H.value,dirty:r,class:["v-select",{"v-select--active-menu":y.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!l.selection},t.class],style:t.style,inputmode:"none",placeholder:I,"onClick:clear":q,"onMousedown:control":J,onBlur:te,onKeydown:ee,"aria-label":c(Z.value),title:c(Z.value)}),{...l,default:()=>A(Y,null,[T(lt,E({ref:f,modelValue:y.value,"onUpdate:modelValue":u=>y.value=u,activator:"parent",contentClass:"v-select__content",disabled:z.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:O,onAfterLeave:ae},_.value),{default:()=>[n&&T(Ge,E({ref:L,selected:k.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:G,onFocusin:le,tabindex:"-1","aria-live":"polite","aria-label":`${t.label}-list`,color:t.itemColor??t.color},j,t.listProps),{default:()=>{var u,x,C;return[(u=l["prepend-item"])==null?void 0:u.call(l),!w.value.length&&!t.hideNoData&&(((x=l["no-data"])==null?void 0:x.call(l))??T(Ve,{key:"no-data",title:c(t.noDataText)},null)),T(ht,{ref:v,renderless:!0,items:w.value,itemKey:"value"},{default:F=>{var de,fe,me;let{item:m,index:D,itemRef:S}=F;const V=Ne(m.props),X=E(m.props,{ref:S,key:m.value,onClick:()=>U(m,null)});return m.type==="divider"?((de=l.divider)==null?void 0:de.call(l,{props:m.raw,index:D}))??T(at,E(m.props,{key:`divider-${D}`}),null):m.type==="subheader"?((fe=l.subheader)==null?void 0:fe.call(l,{props:m.raw,index:D}))??T(Xe,E(m.props,{key:`subheader-${D}`}),null):((me=l.item)==null?void 0:me.call(l,{item:m,index:D,props:X}))??T(Ve,E(X,{role:"option"}),{prepend:xe=>{let{isSelected:Ce}=xe;return A(Y,null,[t.multiple&&!t.hideSelected?T(ot,{key:m.value,modelValue:Ce,ripple:!1,tabindex:"-1"},null):void 0,V.prependAvatar&&T(ut,{image:V.prependAvatar},null),V.prependIcon&&T(we,{icon:V.prependIcon},null)])}})}}),(C=l["append-item"])==null?void 0:C.call(l)]}})]}),i.value.map((u,x)=>{function C(S){S.stopPropagation(),S.preventDefault(),U(u,!1)}const F={"onClick:close":C,onKeydown(S){S.key!=="Enter"&&S.key!==" "||(S.preventDefault(),S.stopPropagation(),C(S))},onMousedown(S){S.preventDefault(),S.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},m=e?!!l.chip:!!l.selection,D=m?qe(e?l.chip({item:u,index:x,props:F}):l.selection({item:u,index:x})):void 0;if(!(m&&!D))return A("div",{key:u.value,class:"v-select__selection"},[e?l.chip?T(et,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:u.title}}},{default:()=>[D]}):T(rt,E({key:"chip",closable:t.closableChips,size:"small",text:u.title,disabled:u.props.disabled},F),null):D??A("span",{class:"v-select__selection-text"},[u.title,t.multiple&&x<i.value.length-1&&A("span",{class:"v-select__selection-comma"},[Ue(",")])])])})]),"append-inner":function(){var F,m;for(var u=arguments.length,x=new Array(u),C=0;C<u;C++)x[C]=arguments[C];return A(Y,null,[(F=l["append-inner"])==null?void 0:F.call(l,...x),t.menuIcon?T(we,{class:"v-select__menu-icon",color:(m=o.value)==null?void 0:m.fieldIconColor,icon:t.menuIcon},null):void 0])}})}),je({isFocused:B,menu:y,select:U},o)}});export{_t as V};
